"use strict";function debug(t,e){e?console.log(t,e):console.log(t)}function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0,o;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(e){var n="img[src]",o='*[style*="background-image"]';function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function t(t,e){this.el=t,this.connection=null,this.isConnectionLow=!1,this.evts={},this.doms={document:document.documentElement,elSrc:[].slice.call(this.el.querySelectorAll(n)),elBg:[].slice.call(this.el.querySelectorAll(o))},this.options=i({},this.options),i(this.options,e),this._initListeners(),this._init()}t.prototype.options={suffix:"--lq"},t.prototype._init=function(){var t=this;"undefined"!=typeof Modernizr?this.connection=Modernizr.prefixed("connection",navigator)||null:this.connection=navigator.connection||null,null!==this.connection&&(this.connection.addEventListener("change",function(){return t._bandwidthChange()}),this._bandwidthChange(),this.isConnectionLow&&this._initElems())},t.prototype.reset=function(){this.isConnectionLow=!1,this.doms={document:document.documentElement,elSrc:[].slice.call(this.el.querySelectorAll(n)),elBg:[].slice.call(this.el.querySelectorAll(o))},null!==this.connection&&(this._bandwidthChange(),this.isConnectionLow&&this._initElems())},t.prototype._initElems=function(){var e=this;this.doms.elSrc.forEach(function(t){return e._toggleLQSrcElem(t)}),this.doms.elBg.forEach(function(t){return e._toggleLQBgSrcElem(t)})},t.prototype._toggleLQSrcElem=function(t){var e=t.getAttribute("src"),n=t.getAttribute("data-src");if(n){var o=n.split(".").pop();n=splice(n,n.indexOf("."+o),0,this.options.suffix),t.setAttribute("data-src",n)}else{var i=e.split(".").pop();e=splice(e,e.indexOf("."+i),0,this.options.suffix),t.setAttribute("src",e)}this._dispatchEvt(t,this.evts.toggleSrc)},t.prototype._toggleLQBgSrcElem=function(t){var e=t.style.backgroundImage,n=t.getAttribute("data-bg-src");if(n){var o=n.split(".").pop();n=splice(n,n.indexOf("."+o),0,this.options.suffix),t.setAttribute("data-bg-src",n)}else{var i=(e=e.substring(5,e.length-2)).split(".").pop();e=splice(e,e.indexOf("."+i),0,this.options.suffix),t.style.backgroundImage='url("'+e+'")'}this._dispatchEvt(t,this.evts.toggleSrc)},t.prototype._initListeners=function(){this.evts.toggleSrc=document.createEvent("Event");var t="rmlq_toggle_src";this.evts.toggleSrc.initEvent(t,!0,!0),this.evts.connection_bad=document.createEvent("Event"),this.evts.connection_good=document.createEvent("Event");var e="rmlq_connection_bad",n="rmlq_connection_good";this.evts.connection_bad.initEvent(e,!0,!0),this.evts.connection_good.initEvent(n,!0,!0)},t.prototype._dispatchEvt=function(t,e){t.dispatchEvent(e)},t.prototype._bandwidthChange=function(){var t=!1;null!=this.connection.type?t=0==this.connection.type||3==this.connection.type||4==this.connection.type||6==this.connection.type||/(cell[ _][23][g]|cell$|cellular)/i.test(this.connection.type):null!=this.connection.effectiveType&&null!=this.connection.downlink&&("3g"==this.connection.effectiveType&&this.connection.downlink<1.2?t=!0:"2g"==this.connection.effectiveType&&(t=!0)),null!=this.connection.metered&&this.connection.metered&&(t=!0),null!=this.connection.bandwidth&&parseInt(this.connection.bandwidth)<1.5&&(t=!0),null!=this.connection.downlinkMax&&parseInt(this.connection.downlinkMax)<1.5&&(t=!0),null!=this.connection.saveData&&this.connection.saveData&&(t=!0),this.isConnectionLow=t,this.doms.document.classList.toggle("lowconnection",this.isConnectionLow),this.isConnectionLow?this._dispatchEvt(e,this.evts.connection_bad):this._dispatchEvt(e,this.evts.connection_good)},e.Bandwidth=t}(window),function(o){function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function t(t){var n=this;this.evts={},this.intersectionListener=null,this.options=i({},this.options),i(this.options,t);var e=new Image;this.env={intersectionObserverSupport:"IntersectionObserver"in o&&"IntersectionObserverEntry"in o&&"intersectionRatio"in o.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in o,idleCallbackSupport:"requestIdleCallback"in o,asyncDecodeSupport:"decode"in e,replaceWithSupport:"replaceWith"in e,webpSupport:null,ignoredImgAttributes:["data-src","data-sizes","data-media","data-srcset","src","srcset"],acceptedDataAttributes:["data-src","data-sizes","data-media","data-srcset"],eventsToBind:[[document,"scroll"],[document,"touchmove"],[o,"resize"],[o,"orientationchange"]]},this.idleCallbackOptions={timeout:this.options.idleLoadTimeout},this.selectorString="img.".concat(this.options.lazyClass,",video.").concat(this.options.lazyClass,",iframe.").concat(this.options.lazyClass,",.").concat(this.options.lazyBgClass),this.selectorWrapperString=".".concat(this.options.lazyWrapperClass),this._check_webp_feature("lossy",function(t,e){n.env.webpSupport=e}),this._initEvents(),this._init()}t.prototype._check_webp_feature=function(e,n){var t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},o=new Image;o.onload=function(){var t=0<o.width&&0<o.height;n(e,t)},o.onerror=function(){n(e,!1)},o.src="data:image/webp;base64,"+t[e]},t.prototype.options={lazyClass:"lazyload",lazyBgClass:"lazyload-bg",lazyLoaded:"lazyload-loaded",lazyWrapperClass:"lazyload-wrapper",enable_webp:!1,threshold:200,throttleTime:200,idlyLoad:!0,idleLoadTimeout:100,observeChanges:!0,observeRootSelector:"body",mutationObserverOptions:{childList:!0}},t.prototype._init=function(){var e=this;document.addEventListener("DOMContentLoaded",function(t){e.reset()},!1)},t.prototype.reset=function(){this.doms={document:document.documentElement,lazyEl:[].slice.call(document.querySelectorAll(this.selectorString)),lazyWrapper:[].slice.call(document.querySelectorAll(this.selectorWrapperString))},this._initListeners(),this._initElems()},t.prototype._initElems=function(){var n=this;this.doms.lazyWrapper.forEach(function(t){var e=t.querySelector(n.selectorString);e&&n.removeInteractionObserverElem(e),n.setInteractionObserverElem(t)}),!0===this.env.intersectionObserverSupport&&this.doms.lazyEl.forEach(function(t){n.intersectionListener.observe(t)})},t.prototype.setInteractionObserverElem=function(t){!0===this.env.intersectionObserverSupport?this.intersectionListener.observe(t):(this.doms.lazyEl.push(t),this._observeFallback())},t.prototype.removeInteractionObserverElem=function(e){!0===this.env.intersectionObserverSupport&&this.intersectionListener.unobserve(e),this.doms.lazyEl=this.doms.lazyEl.filter(function(t){return t!==e})},t.prototype._loadSrc=function(t){var e=this;!0===this.options.idlyLoad&&!0===this.env.idleCallbackSupport?requestIdleCallback(function(){t.classList.contains(e.options.lazyWrapperClass)?e.loadSrc(t.querySelector(e.selectorString)):e.loadSrc(t)},this.idleCallbackOptions):t.classList.contains(e.options.lazyWrapperClass)?e.loadSrc(t.querySelector(e.selectorString)):e.loadSrc(t)},t.prototype.loadSrc=function(o){var i=this,s=this;if("IMG"===o.tagName){var t=o.parentNode;if(t&&"PICTURE"===t.tagName&&[].slice.call(t.querySelectorAll("source")).forEach(function(t){return i._flipDataAttrs(t)}),!0===this.env.asyncDecodeSupport&&!0===this.env.replaceWithSupport){var r=new Image;this._flipDataAttrs(r,o),r.decode().then(function(){for(var t=0;t<o.attributes.length;t++){var e=o.attributes[t].name,n=o.attributes[t].value;-1===s.env.ignoredImgAttributes.indexOf(e)&&r.setAttribute(e,n)}o.replaceWith(r),i._dispatchEvt(o,s.evts.toggleSrc)}).catch(function(){s._flipDataAttrs(o),o.classList.remove(s.options.lazyClass),o.classList.add(s.options.lazyLoaded)})}else this._flipDataAttrs(o),o.classList.remove(this.options.lazyClass),o.classList.add(s.options.lazyLoaded)}if("VIDEO"===o.tagName&&([].slice.call(o.querySelectorAll("source")).forEach(function(t){return i._flipDataAttrs(t)}),o.load(),o.classList.remove(this.options.lazyClass),o.classList.add(this.options.lazyLoaded)),"IFRAME"===o.tagName&&(o.src=o.dataset.src,o.removeAttribute("data-src"),o.classList.remove(this.options.lazyClass),o.classList.add(this.options.lazyLoaded),this._dispatchEvt(o,this.evts.toggleSrc)),o.classList.contains(this.options.lazyBgClass)&&o.getAttribute("data-src")){var e=o.getAttribute("data-src");console.log(e),o.style.backgroundImage="url('"+e+"')",o.classList.remove(this.options.lazyClass),o.classList.remove(this.options.lazyBgClass),o.classList.add(this.options.lazyLoaded),this._dispatchEvt(o,this.evts.toggleSrc)}else o.classList.contains(this.options.lazyBgClass)&&(o.classList.remove(this.options.lazyBgClass),o.classList.add(this.options.lazyLoaded),this._dispatchEvt(o,this.evts.toggleSrc))},t.prototype._flipDataAttrs=function(t){var e,n=(1<arguments.length&&void 0!==arguments[1]&&arguments[1]).dataset||t.dataset;for(var o in n)-1!==this.env.acceptedDataAttributes.indexOf("data-".concat(o))&&(t.setAttribute(o,n[o]),t.removeAttribute("data-".concat(o)));this._dispatchEvt(t,this.evts.toggleSrc)},t.prototype._initEvents=function(){var t=this;this.evts.toggleSrc=document.createEvent("Event");var e="rmlq_toggle_src";this.evts.toggleSrc.initEvent(e,!0,!0)},t.prototype._initListeners=function(){var e=this,n=this;if(!0===this.env.intersectionObserverSupport?this.intersectionListener=new IntersectionObserver(function(t,e){t.forEach(function(t){if(!0===t.isIntersecting||0<t.intersectionRatio){var e=t.target;n._loadSrc(e),n.intersectionListener.unobserve(e),n.doms.lazyEl=n.doms.lazyEl.filter(function(t){return t!==e})}},{rootMargin:"".concat(n.options.threshold,"px 0%")})}):(this.env.eventsToBind.forEach(function(t){t[0].addEventListener(t[1],n._observeFallback)}),this._observeFallback()),!0===this.env.mutationObserverSupport&&!0===this.options.observeChanges){var o=new MutationObserver(function(t){t.forEach(function(t){[].slice.call(document.querySelectorAll(n.selectorString)).forEach(function(t){-1===n.doms.lazyEl.indexOf(t)&&(n.doms.lazyEl.push(t),!0===n.env.intersectionObserverSupport?n.intersectionListener.observe(t):n._observeFallback())})})});document.addEventListener("DOMContentLoaded",function(t){return o.observe(document.querySelector(e.options.observeRootSelector),e.options.mutationObserverOptions)})}},t.prototype._observeFallback=function(){var n=o.lowqualitify.Lazyload,t=!1;!1===t&&n.doms&&(0<n.doms.lazyEl.length||0<n.doms.lazyWrapper.length)&&(t=!0,setTimeout(function(){n.doms.lazyEl.forEach(function(e){e.getBoundingClientRect().top<=o.innerHeight+n.options.threshold&&e.getBoundingClientRect().bottom>=-n.options.threshold&&"none"!==getComputedStyle(e).display&&(n._loadSrc(e),n.doms.lazyEl=n.doms.lazyEl.filter(function(t){return t!==e}))}),n.doms.lazyWrapper.forEach(function(e){e.getBoundingClientRect().top<=o.innerHeight+n.options.threshold&&e.getBoundingClientRect().bottom>=-n.options.threshold&&"none"!==getComputedStyle(e).display&&(n._loadSrc(e),n.doms.lazyWrapper=n.doms.lazyWrapper.filter(function(t){return t!==e}))}),t=!1,0===n.doms.lazyEl.length&&0===n.doms.lazyWrapper.length&&!1===n.options.observeChanges&&env.eventsToBind.forEach(function(t){return t[0].removeEventListener(t[1],n._observeFallback)})},n.options.throttleTime))},t.prototype._dispatchEvt=function(t,e){t.dispatchEvent(e),e.srcEl=t,o.dispatchEvent(e)},o.Lazyload=t}(window),String.prototype.replaceArray=function(t,e){for(var n=this,o=0;o<t.length;o++)n=n.replace(t[o],e[o]);return n};var RMLQ_Connectivity=function(){function t(){_classCallCheck(this,t),this.options=rmlq_options||{el:null},this.options.el=document.body,1==this.options.enable_lq&&(this.Bandwidth=new Bandwidth(this.options.el,{suffix:this.options.suffix})),1==this.options.enable_lazyload&&(this.Lazyload=new Lazyload({enable_webp:this.options.enable_webp}))}return _createClass(t,[{key:"reset",value:function t(){1==this.options.enable_lq&&this.Bandwidth.reset(),1==this.options.enable_lazyload&&this.Lazyload.reset()}}]),t}();window.lowqualitify=new RMLQ_Connectivity;