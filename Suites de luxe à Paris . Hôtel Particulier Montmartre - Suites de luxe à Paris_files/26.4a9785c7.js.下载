(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{71:function(t,e,i){"use strict";function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e),i.d(e,"default",function(){return n});var d=i(49),c="#slider",n=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isLoaded=!1,this.App=t}var t,i,n;return t=e,(i=[{key:"initialize",value:function(){var s=this;this.windowX=window.innerWidth/2,this.windowY=window.innerHeight/2,this.parent=document.querySelector(c),this.imgs=Array.from(s.parent.querySelectorAll("img")),this.dragEl=this.parent.querySelector(".slider__content"),this.cursor=null,this.sliderImages=[],this.material=null,this.effectIntensity=.2,this.animationDuration=this.App.variables.transition_slow__inS,this.slideTitleX=0,this.animationBlur=10,this.animationY=20,this.nbSlide=this.imgs.length,this.currentSlide=0,this.nextSlide=0,this.slideDirection=1,this.isAnimating=!1,this.nextSlideTitle="",this.nextSlidePreTitle="",this.nextSlideSubTitle="",this.drag={type:null,startCoords:null,pointerCoords:null,minDrag:10,maxDrag:0,moveX:0},this.dragging=!1,this.wasDragging=!1,this.vertex="\n            varying vec2 vUv;\n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",this.fragment="\n            varying vec2 vUv;\n\n            uniform sampler2D texture;\n            uniform sampler2D texture2;\n            uniform sampler2D disp;\n\n            // uniform float time;\n            // uniform float _rot;\n            uniform float dispFactor;\n            uniform float effectFactor;\n\n            // vec2 rotate(vec2 v, float a) {\n            //  float s = sin(a);\n            //  float c = cos(a);\n            //  mat2 m = mat2(c, -s, s, c);\n            //  return m * v;\n            // }\n\n            void main() {\n\n                vec2 uv = vUv;\n\n                // uv -= 0.5;\n                // vec2 rotUV = rotate(uv, _rot);\n                // uv += 0.5;\n\n                vec4 disp = texture2D(disp, uv);\n\n                vec2 distortedPosition = vec2(uv.x + dispFactor * (disp.r*effectFactor), uv.y);\n                vec2 distortedPosition2 = vec2(uv.x - (1.0 - dispFactor) * (disp.r*effectFactor), uv.y);\n\n                vec4 _texture = texture2D(texture, distortedPosition);\n                vec4 _texture2 = texture2D(texture2, distortedPosition2);\n\n                vec4 finalTexture = mix(_texture, _texture2, dispFactor);\n\n                gl_FragColor = finalTexture;\n                // gl_FragColor = disp;\n            }\n        ";var o=this.parent.offsetWidth,l=this.parent.offsetHeight,i=new d.WebGLRenderer({antialias:!1});(this.renderer=i).setPixelRatio(window.devicePixelRatio),i.setClearColor(0,1),i.setSize(o,l),this.parent.appendChild(i.domElement);var u=new d.Scene;(this.scene=u).background=new d.Color(0);var t=new d.OrthographicCamera(o/-2,o/2,l/2,l/-2,1,1e3);t.position.z=1;var n,a=new d.TextureLoader;a.crossOrigin="";var e=site_theme_url+"/dist/displacement.png",r=a.load(e);r.wrapS=r.wrapT=d.RepeatWrapping,this.material=new d.ShaderMaterial({uniforms:{effectFactor:{type:"f",value:s.effectIntensity},dispFactor:{type:"f",value:0},texture:{type:"t",value:s.sliderImages[0]},texture2:{type:"t",value:s.sliderImages[1]},disp:{type:"t",value:r}},vertexShader:s.vertex,fragmentShader:s.fragment,transparent:!0,opacity:1});var h=0;this.imgs.forEach(function(t){var e=t.getAttribute("src");t.getAttribute("data-src")&&(e=t.getAttribute("data-src")),(n=0===h?a.load(e+"?v="+Date.now(),function(t){t.image.width,t.image.height;var e=t.image.width/t.image.height,i=l*e,n=l;i<o&&(n=(i=o)/e);var a=new d.PlaneBufferGeometry(i,n,1),r=new d.Mesh(a,s.material);u.add(r),s.isInit()}):a.load(e+"?v="+Date.now())).magFilter=n.minFilter=d.LinearFilter,n.anisotropy=i.capabilities.getMaxAnisotropy(),s.sliderImages.push(n),h++}),window.addEventListener("resize",debounce(function(t){s.windowX=window.innerWidth/2,s.windowY=window.innerHeight/2,o=s.parent.offsetWidth,l=s.parent.offsetHeight,i.setSize(o,l)},200)),this.updating=!1,this.RAF_ID=null,this.animate=function(){s.updating&&(s.RAF_ID=requestAnimationFrame(s.animate)),i.render(u,t)},this.startAnimate=function(){this.updating=!0,this.RAF_ID=null,this.animate()},this.cancelAnimate=function(){this.updating=!1,this.RAF_ID=null,cancelAnimationFrame(this.RAF_ID)},this.renderWidth=o,this.renderHeight=l}},{key:"init",value:function(){var e=this,i=this,r=this.parent,n=this.sliderImages,a=this.material;this.timer=null,this.sliderBox=null,this.pagination=r.querySelector("#slider-pagination"),this.pagButtons=Array.from(i.pagination.querySelectorAll("button")),this.pagTimer=i.pagination.querySelector(".slider__pagination__timer"),this.pagTimerTween=null,this.pageCurrent=r.querySelector("#slider-pages-current"),this.slideTitleEl=r.querySelector("#slide-title"),this.slidePreTitleEl=r.querySelector("#slide-pretitle"),this.slideSubTitleEl=r.querySelector("#slide-subtitle"),this.sliderButtonPrev=r.querySelector(".slider__button--prev"),this.sliderButtonNext=r.querySelector(".slider__button--next"),this.cursorPos={clientX:0,clientY:0},this.cursor=document.querySelector("#arrow-cursor"),this.cursor.classList.add("isVisible"),this.cursorIcon=this.cursor.querySelector(".arrow-cursor__icon"),this.cursorBox=this.cursor.getBoundingClientRect(),this.cursorSide=null,this.cursorInsideSwiper=!1,this.cursorDontFlip=!1,TweenMax.to(this.cursorIcon,0,{rotation:-135,opacity:0,scale:.5}),this.onDragStart=function(t){this.startAnimate(),this.initInterval(!1),this.drag.type="touchstart"==t.type?"touch":"mouse",this.slideDirection=!1,this.drag.startCoords="touch"==this.drag.type?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.x,y:t.y},this.drag.maxDrag=this.App.env.isMobile?this.renderWidth<500?this.renderWidth/2:this.renderWidth/3:this.renderWidth/4},this.onDragStart=this.onDragStart.bind(this),this.onDragMove=function(t){this.parent;var e=this.material;if(null!==this.drag.startCoords){this.drag.pointerCoords="touch"==this.drag.type?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.x,y:t.y},this.drag.moveX=this.drag.startCoords.x-this.drag.pointerCoords.x;var i=this.drag.moveX,n=Math.abs(i);if(n>this.drag.minDrag&&(this.dragging=!0),this.dragging){!1===this.slideDirection&&(this.slideDirection=0<i?1:-1,this.changeSliderDirection(),this.nextSlide=0<this.slideDirection?this.currentSlide+1:this.currentSlide-1,this.nextSlide>=this.nbSlide?this.nextSlide=0:this.nextSlide<0&&(this.nextSlide=this.nbSlide-1),this.getNextSlideInfos());var a=n/this.drag.maxDrag,r=2*a;a<0?a=0:1<a&&(a=1),r<0?r=0:1<r&&(r=1),TweenMax.to(e.uniforms.dispFactor,.1,{value:a}),TweenMax.to(this.slideTitleEl,.1,{autoAlpha:1-r,filter:"blur("+this.animationBlur*r+"px)",y:this.animationY*r}),TweenMax.to(this.slidePreTitleEl,.1,{autoAlpha:1-r,filter:"blur("+this.animationBlur*r+"px)",y:this.animationY*r}),TweenMax.to(this.slideSubTitleEl,.1,{autoAlpha:1-r,filter:"blur("+this.animationBlur*r+"px)",y:this.animationY*r})}}},this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=function(t){var e=this,i=(this.parent,this.material);if(this.wasDragging=this.dragging,this.dragging=!1,this.wasDragging){if(Math.abs(this.drag.moveX)>this.drag.maxDrag/2){this.currentSlide=this.nextSlide,TweenMax.to(i.uniforms.dispFactor,e.animationDuration/2,{value:1,ease:"Expo.easeInOut",onComplete:function(){i.uniforms.texture.value=e.sliderImages[e.currentSlide],i.uniforms.texture.needsUpdate=!0,i.uniforms.dispFactor.value=0,e.cancelAnimate()}}),this.initSlideTitle(),TweenMax.to(this.slideTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,delay:.1}),this.slidePreTitleEl.innerHTML=this.nextSlidePreTitle,TweenMax.to(this.slidePreTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0}),this.slideSubTitleEl.innerHTML=this.nextSlideSubTitle,TweenMax.to(this.slideSubTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,delay:.2,onComplete:function(){e.initSlideLinks()}});var n=this.pagination.querySelectorAll(".active");n&&(n[0].className="");var a=this.pagination.querySelector('[data-slide="'.concat(this.currentSlide,'"]'));a&&(a.className="active"),TweenMax.fromTo(this.pageCurrent,this.animationDuration/2,{autoAlpha:1,x:0},{autoAlpha:0,x:this.animationY*(-1*this.slideDirection),ease:"Expo.easeIn",onComplete:function(){e.pageCurrent.innerHTML="0"+(e.currentSlide+1),TweenMax.to(e.pageCurrent,e.animationDuration/2,{autoAlpha:1,x:0})}})}else TweenMax.to(i.uniforms.dispFactor,this.animationDuration/2,{value:0,ease:"Expo.easeInOut",onComplete:function(){e.cancelAnimate()}}),TweenMax.to(this.slideTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,ease:"Expo.easeIn"}),TweenMax.to(this.slidePreTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,ease:"Expo.easeIn"}),TweenMax.to(this.slideSubTitleEl,this.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,ease:"Expo.easeIn"});this.nextSlide=!1,this.slideDirection=!1}else this.cancelAnimate();this.drag.startCoords=this.drag.pointerCoords=this.drag.moveX=null,this.initInterval()},this.onDragEnd=this.onDragEnd.bind(this),this.getNextSlideInfos=function(){var t=this.parent,e=this.material;this.nextSlideTitle=t.querySelectorAll('[data-slide-title="'.concat(this.nextSlide,'"]'))[0].innerHTML,this.nextSlidePreTitle=t.querySelectorAll('[data-slide-pretitle="'.concat(this.nextSlide,'"]'))[0].innerHTML,this.nextSlideSubTitle=t.querySelectorAll('[data-slide-subtitle="'.concat(this.nextSlide,'"]'))[0].innerHTML,e.uniforms.texture2.value=this.sliderImages[this.nextSlide],e.uniforms.texture2.needsUpdate=!0},this.changeSliderDirection=function(){this.material.uniforms.effectFactor.value=this.effectIntensity*this.slideDirection},this.initSlideTitle=function(){this.App.TitleEffect&&this.App.TitleEffect.initForElem(this.slideTitleEl,this.nextSlideTitle)},this.initSlideLinks=function(){var e=this,i=this.parent,n=this.material,t=e.slideSubTitleEl.querySelector("a");t&&(t.addEventListener("pointerover",function(t){i.classList.add("isLinkHover"),TweenMax.to(n.uniforms.dispFactor,e.animationDuration,{value:.5,ease:"Expo.easeInOut"})}),t.addEventListener("pointerout",function(t){i.classList.remove("isLinkHover"),TweenMax.to(n.uniforms.dispFactor,e.animationDuration,{value:0,ease:"Expo.easeInOut"})}))},this.initPagination=function(){var e=this;this.parent;this.pagButtons.forEach(function(t){t.addEventListener("click",function(){e.isAnimating||(e.startAnimate(),e.isAnimating=!0,e.nextSlide=parseInt(this.dataset.slide,10),e.pagination.querySelectorAll(".active")[0].className="",this.className="active",e.slideDirection=e.nextSlide<e.currentSlide?-1:1,e.changeSliderDirection(),e.getNextSlideInfos(),e.initInterval(),TweenMax.to(a.uniforms.dispFactor,e.animationDuration,{value:1,ease:"Expo.easeInOut",onComplete:function(){a.uniforms.texture.value=n[e.nextSlide],a.uniforms.texture.needsUpdate=!0,a.uniforms.dispFactor.value=0,e.isAnimating=!1,e.currentSlide=e.nextSlide,e.cancelAnimate()}}),TweenMax.fromTo(e.slideTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0},{autoAlpha:0,filter:"blur("+e.animationBlur+"px)",y:e.animationY,ease:"Expo.easeIn",onComplete:function(){e.initSlideTitle(),TweenMax.to(e.slideTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,delay:.1})}}),TweenMax.fromTo(e.slidePreTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0},{autoAlpha:0,filter:"blur("+e.animationBlur+"px)",y:e.animationY,ease:"Expo.easeIn",onComplete:function(){e.slidePreTitleEl.innerHTML=e.nextSlidePreTitle,TweenMax.to(e.slidePreTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0})}}),TweenMax.fromTo(e.slideSubTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0},{autoAlpha:0,filter:"blur("+e.animationBlur+"px)",y:e.animationY,ease:"Expo.easeIn",onComplete:function(){e.slideSubTitleEl.innerHTML=e.nextSlideSubTitle,TweenMax.to(e.slideSubTitleEl,e.animationDuration/2,{autoAlpha:1,filter:"blur(0px)",y:0,delay:.2,onComplete:function(){e.initSlideLinks()}})}}),TweenMax.fromTo(e.pageCurrent,e.animationDuration/2,{autoAlpha:1,x:0},{autoAlpha:0,x:e.animationY*(-1*e.slideDirection),ease:"Expo.easeIn",onComplete:function(){e.pageCurrent.innerHTML="0"+(e.nextSlide+1),TweenMax.to(e.pageCurrent,e.animationDuration/2,{autoAlpha:1,x:0})}}))})})},this.next=function(){var t=e.currentSlide+1;t>=e.nbSlide&&(t=0),e.pagination.querySelector('[data-slide="'+t+'"]').click()},this.initInterval=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e.timer&&(Util.clearRequestInterval(e.timer),(e.timer=null)!==e.pagTimerTween&&(e.pagTimerTween.kill(),e.pagTimerTween=null,TweenMax.set(e.pagTimer,{scaleX:0}))),t&&(e.timer=Util.requestInterval(e.next,1e4),e.pagTimerTween=TweenMax.to(e.pagTimer,10,{scaleX:1}))},this.addEvents=function(){var e=this;this.initPagination(),this.initInterval();var t="mousedown",i="mousemove",n="mouseup",a="mouseupoutside";this.App.env.isMobile&&(t="touchstart",i="touchmove",n="touchend",a="touchendoutside"),r.addEventListener(t,e.onDragStart),r.addEventListener(n,e.onDragEnd),r.addEventListener(a,e.onDragEnd),r.addEventListener(i,throttle(function(t){e.onDragMove(t)},30)),this.App.env.isMobile||this.pagButtons.forEach(function(t){t.addEventListener("mouseenter",function(t){e.cursorDontFlip=!0}),t.addEventListener("mouseeleave",function(t){setTimeout(function(){e.cursorDontFlip=!1},50)})})},this.addEvents(),this.startIsInViewport=function(){Util.addClass(this.parent,"isInViewport"),Util.removeClass(this.parent,"isNotInViewport"),this.startAnimate(),this.initInterval()},this.cancelIsInViewport=function(){Util.addClass(this.parent,"isNotInViewport"),Util.removeClass(this.parent,"isInViewport"),this.cancelAnimate(),this.initInterval(!1)},this.isInViewport=Util.isInViewport(i.parent),this.isInViewport&&this.startIsInViewport(),window.addEventListener("scroll",throttle(function(t){Util.isInViewport(i.parent)?i.isInViewport||(i.isInViewport=!0,i.startIsInViewport()):i.isInViewport&&(i.isInViewport=!1,i.cancelIsInViewport())},30)),this.pagination.querySelector('[data-slide="0"]').click(),r.classList.add("isInit")}},{key:"isInit",value:function(){this.isLoaded=!0,this.App.loadProgress+=1,this.App.checkAppLoaded()}}])&&a(t.prototype,i),n&&a(t,n),e}()}}]);
//# sourceMappingURL=26.4a9785c7.js.map